<app-layout class="l-block auto-inject-wrap" vue-id="0d97070a-1" showTabbar="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><error-tips class="vue-ref" vue-id="{{('0d97070a-2')+','+('0d97070a-1')}}" hide="{{errorTipsHide}}" message="{{errorTips}}" data-ref="error-tips" data-event-opts="{{[['^updateHide',[['__set_sync',['$0','errorTipsHide','$event'],['']]]],['^updateMessage',[['__set_sync',['$0','errorTips','$event'],['']]]]]}}" bind:updateHide="__e" bind:updateMessage="__e" bind:__l="__l"></error-tips><view class="{{['pay-order-content content safe-area-padding-bottom-_160rpx_']}}"><yk-form class="form vue-ref" vue-id="{{('0d97070a-3')+','+('0d97070a-1')}}" rules="{{rules}}" model="{{model}}" data-ref="yk-form" data-event-opts="{{[['^updateRules',[['__set_sync',['$0','rules','$event'],['']]]],['^updateModel',[['__set_sync',['$0','model','$event'],['']]]],['^ykFormValidate',[['handleValidate']]]]}}" bind:updateRules="__e" bind:updateModel="__e" bind:ykFormValidate="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{isList&&hasPro}}"><view class="shopping-info assets-wrap"><view class="shopping-store-name"><view class="iconfront" style="{{(bgText)}}">自提</view><view class="store-name">{{''+(storeInfo&&storeInfo.name||'')+''}}</view></view></view></block><view class="label-title">{{isList?'商品信息':'卡项信息'}}</view><view class="assets-wrap cells"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view><block wx:if="{{item.g0}}"><view class="product-item flex"><view class="item-image"><image class="image" src="{{item.m0}}"></image></view><view class="item-content"><view class="item-title"><block wx:if="{{item.$orig.isGiftProduct}}"><text class="{{['text-_hFF4D4F_']}}">【赠】</text></block>{{''+item.$orig.name+''}}<text class="spec">{{''+item.$orig.spec+''}}</text></view><block wx:if="{{item.g1}}"><order-combo-sku-info class="{{['block mt-12 w-520']}}" vue-id="{{('0d97070a-4-'+index)+','+('0d97070a-3')}}" comboItemClass="w-500" comboSkuList="{{item.$orig.$comboSkuList}}" bind:__l="__l"></order-combo-sku-info></block><block wx:if="{{item.$orig.$rights}}"><block wx:if="{{item.$orig.$rights.isUseMemberDiscount}}"><view class="level flex justify-between"><view class="level_left">{{item.$orig.$rights.levelName}}</view><view class="level_right">{{''+item.$orig.$rights.levelRightText+''}}</view></view></block><block wx:if="{{item.$orig.$rights.cusPrice&&item.$orig.$rights.$cusPrice>0}}"><view class="level flex justify-between"><view class="level_left">手动改价</view><view class="level_right">{{item.$orig.$rights.$symbol+"￥"+item.$orig.$rights.$cusPrice}}</view></view></block><block wx:if="{{item.$orig.$rights.useCard}}"><view class="level flex justify-between"><view class="level_left">卡项抵扣</view><view class="level_right">{{"-￥"+item.$orig.price}}</view></view></block><block wx:if="{{item.$orig.$rights.useRight}}"><view class="level flex justify-between"><view class="level_left">赠送权益抵扣</view><view class="level_right">{{"-￥"+item.$orig.price}}</view></view></block></block><block wx:else><block wx:if="{{useItemListRights&&itemListRights[index]&&itemListRights[index].type===4}}"><view class="level flex justify-between"><view class="level_left">体验价优惠</view><view class="level_right">{{'-￥'+(item.$orig.price-itemListRights[index].experiencePriceData.experiencePrice)+''}}</view></view></block></block><view class="item-price"><view class="flex"><block wx:if="{{item.$orig.typeText}}"><text class="px-14 h-30 border-1 border-solid border-primary rounded-15 text-20 text-primary leading-30 text-center mr-10">{{''+item.$orig.typeText+''}}</text></block><block wx:if="{{isCoupon}}"><image class="price-icon" src="{{''+$BASE_URL+'/image/miniapp/score-shop/coin.png'}}"></image><view><text class="color-price" style="{{(textColor)}}"><text>{{item.$orig.$integral}}</text><block wx:if="{{item.$orig.$money}}"><text>{{"+¥"+item.$orig.$money}}</text></block></text><block wx:if="{{item.$orig.unitType}}"><text class="price-unitType">{{"/"+item.$orig.unitType}}</text></block></view></block><block wx:else><block wx:if="{{item.$orig.hasDiscount}}"><view class="item-discount color-price" style="{{(textColor)}}">折后</view></block><view><text class="color-price" style="{{(textColor)}}">{{"￥"+item.$orig.$price}}</text><block wx:if="{{item.$orig.unitType}}"><text class="price-unitType">{{"/"+item.$orig.unitType}}</text></block></view></block></view><view class="color-89">{{"x"+item.$orig.productNum}}</view></view></view></view></block><block wx:else><view class="{{['card-info-list','color-53','flex']}}"><view class="relative w-150 h-150 rounded-4 overflow-hidden"><view class="w-full h-full bg-primary opacity-10"></view><view class="icon-ka icon text-76 text-primary absolute top-_50p_ left-_50p_ translate-x-_-50p_ translate-y-_-50p_"></view></view><view class="card-info-item"><view class="{{['flex']}}"><view class="type" style="{{('border:1px solid'+(curColor.colorIndex===0?'#D9A552':curColor.primary)+';'+textColor)}}">{{''+item.$orig.typeText+''}}</view><view class="{{['ml-10 text-30 font-bold text-_h363636_'+' '+(item.$orig.$rights?'margin-top-23':'')]}}">{{''+item.$orig.name+''}}</view></view><view class="{{['card-info-tit']}}"><view class="flex"><block wx:if="{{item.$orig.$rights}}"><view class="flex-item text-right margin-top-23"><block wx:if="{{item.$orig.$rights.isUseMemberDiscount}}"><view class="price">{{''+item.$orig.$rights.levelName+" ¥\n                      "+item.$orig.subtotal+''}}</view></block><block wx:if="{{item.$orig.$rights.cusPrice&&item.$orig.$rights.$cusPrice}}"><view class="price">{{''+('¥'+item.$orig.price)+''}}</view></block><block wx:if="{{useItemListRights}}"><block wx:if="{{!itemListRights[0]}}"><view class="price">{{"¥"+item.$orig.price}}</view></block><block wx:else><block wx:if="{{itemListRights[0].type===4}}"><view class="price">{{'¥'+itemListRights[0].experiencePriceData.experiencePrice+''}}</view></block></block></block></view></block><block wx:else><block wx:if="{{item.$orig.$rights}}"><view class="flex-item text-right margin-top-23"><block wx:if="{{item.$orig.$rights.isUseMemberDiscount}}"><view class="price">{{''+item.$orig.$rights.levelName+" ¥\n                        "+item.$orig.subtotal+''}}</view></block><block wx:if="{{item.$orig.$rights.cusPrice&&item.$orig.$rights.$cusPrice}}"><view class="price">{{'¥'+item.$orig.price+''}}</view></block></view></block><block wx:if="{{useItemListRights}}"><view class="{{['flex-1 text-right']}}"><block wx:if="{{!itemListRights[0]}}"><view class="price">{{"¥"+item.$orig.price}}</view></block><block wx:else><block wx:if="{{itemListRights[0].type===4}}"><view class="price">{{'¥'+itemListRights[0].experiencePriceData.experiencePrice+''}}</view></block></block></view></block></block></view><block wx:if="{{useItemListRights&&itemListRights[0]&&itemListRights[0].type===4}}"><view class="{{['my-23 flex items-center justify-between text-24 text-color-b2']}}"><view>体验价优惠</view><block wx:if="{{shopCart.$itemList}}"><view>{{'-¥'+(item.$orig.price-itemListRights[0].experiencePriceData.experiencePrice)+''}}</view></block><block wx:else><view>{{"-¥"+(item.$orig.price-itemListRights[0].experiencePriceData.experiencePrice)}}</view></block></view></block><block wx:if="{{item.$orig.$rights}}"><view><block wx:if="{{item.$orig.$rights.cusPrice&&item.$orig.$rights.$cusPrice}}"><view class="level flex justify-between"><view class="level_left padding_left_20">手动改价</view><view class="level_right">{{item.$orig.$rights.$symbol+"￥"+item.$orig.$rights.$cusPrice}}</view></view></block></view></block></view><view class="{{['flex justify-between text-32 leading-34']}}"><text class="{{['font-bold text-_hd9a552_']}}" style="{{(textColor)}}">{{'￥'+(shopCart.$itemList?item.$orig.subtotal:item.$orig.subtotal)+''}}</text><view class="{{['text-_h898989_']}}">x1</view></view></view></view></block></view></block><view><view class="cell pro-price"><view class="label cell-title">商品金额</view><view class="cell-extra flex align-center"><view class="content price">{{"￥"+total}}</view></view></view><block wx:if="{{isCoupon}}"><view class="cell"><block wx:if="{{isCoupon}}"><view class="label cell-title">{{"会员"+integralText}}</view></block><block wx:if="{{isCoupon}}"><view class="cell-extra flex align-center"><view class="content price">{{''+couponTotal+''}}</view></view></block></view></block></view></view><block wx:if="{{(isOpenCoupon&&!isCoupon||showMemberBalance&&supportBalance)&&projectType!==3}}"><view class="label-title">结算信息</view></block><block wx:if="{{isMounted&&(isOpenCoupon&&!isCoupon||showMemberBalance&&supportBalance||tikTokCouponInfo.checked)&&projectType!==3}}"><view class="assets-wrap cells"><block wx:if="{{!isCoupon}}"><order-use-coupon-cell vue-id="{{('0d97070a-5')+','+('0d97070a-3')}}" spacer="{{true}}" disabledChange="{{hasOnlinePay}}" customClick="{{true}}" valueClass="text-color-b2 text-30 leading-40" suffixIconOriginClass="mt-6 itext-color-b2 itext-30" discountInfo="{{discountInfo}}" data-event-opts="{{[['^click',[['onUseCouponClick']]]]}}" bind:click="__e" bind:__l="__l"></order-use-coupon-cell></block><block wx:if="{{canUseIntegral&&!isCoupon&&projectType!==3}}"><view class="cell" hover-class="{{!disabledIntegral&&!notEnoughtIntegral&&!hasOnlinePay&&'is-hover'}}" data-event-opts="{{[['tap',[['onSelectIntegral',['$event']]]]]}}" bindtap="__e"><view class="cell-title">{{integralText+"抵现"}}</view><view class="cell-extra flex align-center"><view class="cell-text flex flex-wrap text-right justify-end"><text class="{{[(disabledIntegral||!orderIntegral.integral||notEnoughtIntegral)&&'color-b2']}}">{{''+integralDiscountText+''}}</text></view><block wx:if="{{!disabledIntegral&&!notEnoughtIntegral}}"><view class="icon icon-angle-right color-b2"></view></block></view></view></block><block wx:if="{{showMemberBalance&&supportBalance&&projectType!==3}}"><view class="cell" hover-class="{{!hasOnlinePay?'is-hover':''}}" data-event-opts="{{[['tap',[['onUseBalance',['$event']]]]]}}" bindtap="__e"><view class="cell-title">会员余额</view><view class="cell-extra flex align-center"><view class="cell-text flex flex-wrap text-right justify-end"><block wx:if="{{remain.value}}"><text>{{"-"+remain.value+"元"}}</text><text class="desc">{{"(本金：-"+remain.diffValue+"元，赠额：-"+remain.diffFreeValue+"元)"}}</text></block><block wx:else><text class="color-b2">不使用</text></block></view><block wx:if="{{!isLoading}}"><view class="icon icon-angle-right color-b2"></view></block></view></view></block></view></block><block wx:if="{{hasOnlinePay&&onlinePrice>0}}"><view class="online-wrap">{{"已在线支付："+onlinePrice+"元"}}</view></block><view class="bottom-wrap"><block wx:if="{{discountInfo.isRounding||discountInfo.useDiscount}}"><view class="absolute h-_54rpx_ -top-_54rpx_ left-0 text-22 _center bg-_hfff1f0_ text-_hFF6263_ w-full"><block wx:if="{{discountInfo.useDiscount}}"><view>{{'整单优惠'+discountText+"折（-"+discountAmountYs+'）'}}</view></block><block wx:if="{{discountInfo.useDiscount&&discountInfo.isRounding}}"><text>、</text></block><block wx:if="{{discountInfo.isRounding}}"><view>{{"抹零（-"+roundingAmountYs+"）"}}</view></block></view></block><view class="flex justify-between align-center min-height116"><view><view class="align-center">需支付：<price vue-id="{{('0d97070a-6')+','+('0d97070a-3')}}" price="{{finalShouldPrice}}" customFontSize="{{1}}" bind:__l="__l"></price></view><block wx:if="{{disabledBtn}}"><text class="price_tag">暂未开通支付，需结算后0元才可支付</text></block></view><button class="{{['button style_btn',[isLoading||isSubmitting||disabledBtn?'disabled':'']]}}" style="{{(bgColor)}}" hover-class="style_btn_hover" disabled="{{isLoading||isSubmitting||disabledBtn}}" loading="{{isSubmitting}}" data-event-opts="{{[['tap',[['_handleSubmit',['$event']]]]]}}" bindtap="__e">支付</button></view></view></yk-form></view><block wx:if="{{promptModal.init}}"><prompt-modal class="vue-ref" vue-id="{{('0d97070a-7')+','+('0d97070a-1')}}" data-ref="promptModalRef" bind:__l="__l"></prompt-modal></block><yk-loading class="vue-ref" vue-id="{{('0d97070a-8')+','+('0d97070a-1')}}" data-ref="ykLoading" bind:__l="__l"></yk-loading></app-layout>
